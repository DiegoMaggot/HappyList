<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button (click)="back()">
                <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-buttons slot="end">
            <ion-button (click)="saveList()" [disabled]="!newList.name || newList.products.length <= 0">
                <mat-icon slot="icon-only">checkmark</mat-icon>
            </ion-button>
        </ion-buttons>
        <ion-title text-center>Nova lista</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>

    <mat-card class="container">
        <mat-form-field>
            <input matInput type="text" [(ngModel)]="newList.name" maxlength="35" placeholder="Nome">
            <mat-hint align="end"> {{newList.name.length}} / 35</mat-hint>
        </mat-form-field>
        <div style="margin-top: 5px;">
            <ion-label text-center>
                <h3>Adicionar produtos</h3>
            </ion-label>
            <!-- lista de produtos -->
            <div *ngIf="!products" class="addProduct">
                <mat-form-field>
                    <mat-select [(ngModel)]="newProduct" placeholder="Escolher Produto:">
                        <mat-option *ngFor="let product of products" [value]="product">{{product.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <button mat-icon-button (click)="addProduct()">
                        <mat-icon>add</mat-icon>
                </button>
            </div>
            <button mat-raised-button (click)="registerProduct()" style="background: #0b9bbe; color: #fff; margin-left: 35%!important;">Novo produto</button>
            <!-- novo produto -->
            <div *ngIf="newOption">
                <mat-form-field>
                    <input matInput [(ngModel)]="newProduct.name" type="text" maxlength="35" placeholder="Nome">
                    <mat-hint align="end"> {{newProduct.name.length}} / 35</mat-hint>
                </mat-form-field>
                <mat-form-field class="mid">
                    <input matInput [(ngModel)]="newProduct.weight" type="number" placeholder="Peso">
                </mat-form-field>
                <mat-form-field class="mid">
                    <mat-select [(ngModel)]="newProduct.measureUnit" placeholder="Unidade de medida" selected="">
                        <mat-option value=""></mat-option>
                        <mat-option value="Kg">Quilograma</mat-option>
                        <mat-option value="g">Grama</mat-option>
                        <mat-option value="L">Litro</mat-option>
                        <mat-option value="ml">Mililitro</mat-option>
                    </mat-select>
                </mat-form-field>
                <button mat-raised-button (click)="addProduct(newProduct)" style="background: #26bb71; color: rgb(255, 255, 255); width: 100%;">Adicionar Produto</button>
            </div>
        </div>
    </mat-card>
    <!-- lista de produtos -->
    <mat-card class="container">
        <ion-item lines="none" no-padding>
            <ion-label text-center *ngIf="newList.products.length > 0">Meus Produtos</ion-label>
            <ion-label text-center *ngIf="newList.products.length == 0">Lista vazia</ion-label>
        </ion-item>
        <mat-list role="list">
            <mat-list-item role="listitem" *ngFor="let product of newList.products">
                <ion-grid fixed>
                    <ion-row>
                        <ion-col size="12">
                            <ion-item expand="full" no-padding>
                                <ion-label lines="none" no-padding>{{product.name}}
                                </ion-label>
                                <button mat-icon-button (click)="addQuantity(product)"><mat-icon>add</mat-icon></button> {{product.quantity}}
                                <button mat-icon-button (click)="removeQuantity(product)"><mat-icon>remove</mat-icon></button>
                                <button mat-icon-button (click)="deleteItem(product)"><mat-icon>delete</mat-icon></button>
                            </ion-item>
                            <!-- <ion-label lines="none" no-padding>
                                <p> {{product.quantity}} Unidades</p>
                            </ion-label> -->
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </mat-list-item>
        </mat-list>
    </mat-card>
</ion-content>